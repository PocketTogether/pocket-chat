å½“ç„¶å¯ä»¥ï¼Œè€Œä¸”è¿™æ˜¯**æœ€å¹²å‡€ã€æœ€å¯ç»´æŠ¤ã€æœ€äº§å“çº§**çš„è®¾è®¡æ–¹å¼ã€‚  
ä½ ç°åœ¨çš„æ€è·¯ï¼š

```
MIME å­—ç¬¦ä¸² â†’ åˆ†ç±»
åˆ†ç±» â†’ å›¾æ ‡ï¼ˆRemix Icon classï¼‰
```

è¿™æ˜¯æ¯” â€œæ‰©å±•å â†’ å›¾æ ‡â€ æ›´ç¨³å¥çš„æ–¹æ¡ˆï¼Œå°¤å…¶é€‚åˆä½ ç°åœ¨åœ¨åšçš„ PocketChat æ–‡ä»¶ç³»ç»Ÿï¼Œå› ä¸ºï¼š

- MIME æ˜¯ä¸Šä¼ æ—¶æµè§ˆå™¨æä¾›çš„ï¼ˆæ¯”æ‰©å±•åæ›´å¯é ï¼‰
- åˆ†ç±»æ˜¯è¯­ä¹‰å±‚ï¼ˆç¨³å®šã€å¯æ‰©å±•ï¼‰
- å›¾æ ‡æ˜¯è¡¨ç°å±‚ï¼ˆå¯æ›¿æ¢ã€å¯å›½é™…åŒ–ã€å¯ä¸»é¢˜åŒ–ï¼‰

æˆ‘ç»™ä½ ä¸€ä¸ª**æœºåˆ¶çº§ã€å·¥ç¨‹çº§ã€äº§å“çº§**çš„å®Œæ•´æ–¹æ¡ˆï¼Œä½ å¯ä»¥ç›´æ¥å¤åˆ¶åˆ°é¡¹ç›®é‡Œã€‚

---

# ğŸ§© ä¸€ã€ç¬¬ä¸€å±‚ï¼šMIME â†’ åˆ†ç±»ï¼ˆæ ¸å¿ƒè¯­ä¹‰å±‚ï¼‰

ä½ éœ€è¦ä¸€ä¸ª **MIME å‰ç¼€ + ç²¾ç»† MIME â†’ åˆ†ç±»** çš„æ˜ å°„ã€‚

## 1. åŸºäº MIME å‰ç¼€çš„ç²—åˆ†ç±»

```ts
const MIME_PREFIX_TO_CATEGORY = {
  'image/': 'image',
  'video/': 'video',
  'audio/': 'audio',
  'text/': 'text',
} as const;
```

## 2. åŸºäºå…·ä½“ MIME çš„ç»†åˆ†ç±»ï¼ˆè¦†ç›–å¸¸è§æ–‡æ¡£ç±»å‹ï¼‰

```ts
const MIME_TO_CATEGORY = {
  'application/pdf': 'pdf',
  'application/msword': 'document',
  'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'document',
  'application/vnd.ms-excel': 'sheet',
  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'sheet',
  'application/vnd.ms-powerpoint': 'slide',
  'application/vnd.openxmlformats-officedocument.presentationml.presentation': 'slide',
  'application/zip': 'archive',
  'application/x-7z-compressed': 'archive',
  'application/x-rar-compressed': 'archive',
} as const;
```

## 3. åˆ†ç±»å‡½æ•°ï¼ˆæœ€ç»ˆ APIï¼‰

```ts
export function getFileCategoryFromMime(mime: string): FileCategory {
  if (!mime) return 'file';

  // ç²¾ç¡®åŒ¹é…
  if (mime in MIME_TO_CATEGORY) {
    return MIME_TO_CATEGORY[mime as keyof typeof MIME_TO_CATEGORY];
  }

  // å‰ç¼€åŒ¹é…
  for (const prefix in MIME_PREFIX_TO_CATEGORY) {
    if (mime.startsWith(prefix)) {
      return MIME_PREFIX_TO_CATEGORY[prefix as keyof typeof MIME_PREFIX_TO_CATEGORY];
    }
  }

  return 'file';
}
```

---

# ğŸ¨ äºŒã€ç¬¬äºŒå±‚ï¼šåˆ†ç±» â†’ å›¾æ ‡ï¼ˆRemix Icon classï¼‰

åˆ†ç±»æ•°é‡å¾ˆå°‘ï¼Œæ‰€ä»¥æ˜ å°„éå¸¸ç®€å•ã€‚

```ts
const CATEGORY_TO_RI_ICON = {
  image: 'ri-image-line',
  video: 'ri-video-line',
  audio: 'ri-music-2-line',
  pdf: 'ri-file-pdf-line',
  document: 'ri-file-text-line',
  sheet: 'ri-file-excel-line',
  slide: 'ri-file-ppt-line',
  text: 'ri-file-text-line',
  archive: 'ri-archive-line',
  file: 'ri-file-line',
} as const;
```

---

# ğŸ¯ ä¸‰ã€æœ€ç»ˆ APIï¼šMIME â†’ å›¾æ ‡

```ts
export function getIconFromMime(mime: string): string {
  const category = getFileCategoryFromMime(mime);
  return CATEGORY_TO_RI_ICON[category];
}
```

ä½¿ç”¨æ–¹å¼ï¼š

```ts
const icon = getIconFromMime(file.type);
```

---

# ğŸ§  å››ã€ä¸ºä»€ä¹ˆè¿™ç§è®¾è®¡æ˜¯æœ€ä¼˜çš„ï¼Ÿ

### âœ” 1. MIME æ¯”æ‰©å±•åæ›´å¯é 

æµè§ˆå™¨æä¾›çš„ `file.type` é€šå¸¸æ˜¯æ­£ç¡®çš„ï¼ˆè™½ç„¶ä¸æ˜¯ 100%ï¼‰ã€‚

### âœ” 2. åˆ†ç±»æ˜¯è¯­ä¹‰å±‚

åˆ†ç±»æ•°é‡å°‘ã€ç¨³å®šã€å¯æ‰©å±•ã€‚

### âœ” 3. å›¾æ ‡æ˜¯è¡¨ç°å±‚

ä½ å¯ä»¥éšæ—¶æ¢å›¾æ ‡åº“ï¼ˆRemix â†’ Lucide â†’ VSCode iconsï¼‰ã€‚

### âœ” 4. ç»“æ„æ¸…æ™°ã€å¯ç»´æŠ¤

ä½ åªéœ€è¦ç»´æŠ¤ä¸¤ä¸ªå°å­—å…¸ï¼Œè€Œä¸æ˜¯å‡ ç™¾ä¸ªæ‰©å±•åã€‚

---

# ğŸš€ äº”ã€å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥å¸®ä½ è¿›ä¸€æ­¥æ‰©å±•ï¼š

- åŠ ä¸Š **åˆ†ç±» â†’ é¢œè‰²**
- åŠ ä¸Š **åˆ†ç±» â†’ æ˜¯å¦å¯é¢„è§ˆ**
- åŠ ä¸Š **åˆ†ç±» â†’ æ˜¯å¦å±é™©ï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ï¼‰**
- è‡ªåŠ¨ç”Ÿæˆ MIME â†’ åˆ†ç±»ï¼ˆä» mime-dbï¼‰
- ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„ `@pocketchat/file-types` npm åŒ…

ä½ æƒ³ç»§ç»­æ‰©å±•å“ªä¸€å—ï¼Œæˆ‘å¯ä»¥ç›´æ¥å¸®ä½ å†™å‡ºæ¥ã€‚
