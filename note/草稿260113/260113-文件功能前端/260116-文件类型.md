
```
export const CATEGORY_TO_RI_ICON = {
  // å†…å®¹ç±»
  image: 'ri-image-fill',
  video: 'ri-video-fill',
  audio: 'ri-music-fill',
  pdf: 'ri-file-pdf-fill',
  document: 'ri-file-article-fill',
  word: 'ri-file-word-fill',
  sheet: 'ri-file-excel-fill',
  slide: 'ri-file-ppt-fill',
  text: 'ri-file-text-fill',
  gif: 'ri-file-gif-fill',
  code: 'ri-file-code-fill',
  archive: 'ri-zip-fill',
  hwp: 'ri-file-hwp-fill',
  chart: 'ri-file-chart-fill',        // æ•°æ®æ–‡ä»¶ / å­˜æ¡£æ–‡ä»¶
  game: 'ri-file-chart-2-fill',       // æ¸¸æˆæ–‡ä»¶ / æ¸¸æˆèµ„æºåŒ…
  unknow: 'ri-file-unknow-fill',

  settings: 'ri-file-settings-fill',  // å¯æ‰§è¡Œæ–‡ä»¶
  lock: 'ri-file-lock-fill',
  shield: 'ri-file-shield-fill',
  time: 'ri-file-history-fill',
  damage: 'ri-file-damage-fill',
  user: 'ri-file-user-fill',

  upload: 'ri-file-upload-fill',
  download: 'ri-file-download-fill',  // å¯ç”¨äº .torrent
  transfer: 'ri-file-transfer-fill',
  search: 'ri-file-search-fill',
  info: 'ri-file-info-fill',
  warning: 'ri-file-warning-fill',
  add: 'ri-file-add-fill',
  reduce: 'ri-file-reduce-fill',
  marked: 'ri-file-marked-fill',

  // fallback
  file: 'ri-file-fill',
} as const;
```

å¯è¡¨è¾¾çš„æ–‡ä»¶ç±»å‹ï¼Œä¼šæœ‰å¾ˆå¤šå¾ˆå¤šï¼Œè¯·è¯¦å°½ç”Ÿæˆ

| åˆ†ç±» | å›¾æ ‡ | å¯è¡¨è¾¾çš„æ–‡ä»¶ç±»å‹ | å¤‡æ³¨ |
|------|------|------------------|------------------|
| image | ri-image-fill | jpg, png, webp, svg | â€” |
| video | ri-video-fill | mp4, mov, webm | â€” |
| audio | ri-music-fill | mp3, wav, flac | â€” |
| pdf | ri-file-pdf-fill | pdf | â€” |
| document | ri-file-article-fill | txt, md, rtf | é€šç”¨æ–‡æ¡£ |
| word | ri-file-word-fill | doc, docx | â€” |
| sheet | ri-file-excel-fill | xls, xlsx, csv | â€” |
| slide | ri-file-ppt-fill | ppt, pptx | â€” |
| text | ri-file-text-fill | txt, log, ini | çº¯æ–‡æœ¬ |
| gif | ri-file-gif-fill | gif | åŠ¨å›¾ |
| code | ri-file-code-fill | js, ts, py, java, cpp, html, css, json | æºä»£ç ã€è„šæœ¬ |
| archive | ri-zip-fill | zip, rar, 7z, tar.gz | å‹ç¼©åŒ… |
| hwp | ri-file-hwp-fill | hwp | éŸ©å›½æ–‡æ¡£æ ¼å¼ |
| chart | ri-file-chart-fill | chart.json, csv, xlsx | **è§†è§‰éšå–»ï¼šåƒå­˜å‚¨å¡ï¼Œå¯æ³›æŒ‡â€œæ•°æ®æ–‡ä»¶ / å­˜æ¡£æ–‡ä»¶â€** |
| game | ri-file-chart-2-fill | rom, iso, sav, pak | **è§†è§‰éšå–»ï¼šåƒåƒè±†äººï¼Œå¯æ³›æŒ‡â€œæ¸¸æˆæ–‡ä»¶ / æ¸¸æˆèµ„æºåŒ…â€** |
| unknow | ri-file-unknow-fill | æ— æ³•è¯†åˆ«çš„æ–‡ä»¶ | fallback |
| settings | ri-file-settings-fill | exe, app, dmg, sh, bat | **å¯æ‰§è¡Œæ–‡ä»¶æœ€ä½³é€‰æ‹©** |
| lock | ri-file-lock-fill | åŠ å¯†æ–‡ä»¶ã€æƒé™å—é™æ–‡ä»¶ | .enc, .vault |
| shield | ri-file-shield-fill | å®‰å…¨æ‰«ææ–‡ä»¶ã€å¯ä¿¡æ–‡ä»¶ | .cert, .pem |
| time | ri-file-history-fill | æ—¥å¿—ã€å†å²ç‰ˆæœ¬ | .log, .bak, .old |
| damage | ri-file-damage-fill | æŸåæ–‡ä»¶ã€æ— æ³•é¢„è§ˆ | è§£æå¤±è´¥æ—¶ä½¿ç”¨ |
| user | ri-file-user-fill | ç”¨æˆ·é…ç½®æ–‡ä»¶ | profile.json, user.conf |
| upload | ri-file-upload-fill | ä¸Šä¼ ä»»åŠ¡ã€ä¸´æ—¶æ–‡ä»¶ | .uploading |
| download | ri-file-download-fill | **ç§å­æ–‡ä»¶ï¼ˆ.torrentï¼‰**ã€ä¸‹è½½ä»»åŠ¡ | ä½ ç‰¹åˆ«æåˆ°çš„ç”¨é€” âœ” |
| transfer | ri-file-transfer-fill | ä¼ è¾“ä¸­ã€åŒæ­¥ä¸­ | ä¸´æ—¶ä¼ è¾“æ–‡ä»¶ |
| search | ri-file-search-fill | æœç´¢ç»“æœã€ç´¢å¼•æ–‡ä»¶ | .idx |
| info | ri-file-info-fill | å…ƒæ•°æ®æ–‡ä»¶ | .nfo |
| warning | ri-file-warning-fill | ä¸€äº›é£é™©æ£€æµ‹è½¯ä»¶å¯èƒ½ä¼šä½¿ç”¨çš„æ–‡ä»¶ï¼Ÿ | â€¦â€¦ |
| add | ri-file-add-fill | æ–°å»ºæ–‡ä»¶ã€æ¨¡æ¿æ–‡ä»¶ | .template â€¦â€¦ |
| reduce | ri-file-reduce-fill | åˆ é™¤ã€å›æ”¶ç«™æ–‡ä»¶ | .trash â€¦â€¦ |
| marked | ri-file-marked-fill | æ”¶è—ã€æ ‡ç­¾æ–‡ä»¶ | .starred â€¦â€¦ |

# ğŸ§© 2. MIME â†’ åˆ†ç±»ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰

è¿™æ˜¯æ ¸å¿ƒï¼š**æµè§ˆå™¨èƒ½è¯†åˆ«çš„ MIME å¾ˆæœ‰é™**ï¼Œä½†æˆ‘ä»¬æŠŠæ‰€æœ‰å¸¸è§çš„éƒ½è¦†ç›–ã€‚

```
export const MIME_TO_CATEGORY: Record<string, keyof typeof CATEGORY_TO_RI_ICON> = {
  // ============================
  // Images
  // ============================
  'image/jpeg': 'image',
  'image/pjpeg': 'image',
  'image/png': 'image',
  'image/webp': 'image',
  'image/gif': 'gif',
  'image/bmp': 'image',
  'image/x-ms-bmp': 'image',
  'image/svg+xml': 'image',
  'image/tiff': 'image',
  'image/x-icon': 'image',
  'image/vnd.microsoft.icon': 'image',
  'image/heic': 'image',
  'image/heif': 'image',
  'image/avif': 'image',

  // ============================
  // Video
  // ============================
  'video/mp4': 'video',
  'video/webm': 'video',
  'video/ogg': 'video',
  'video/quicktime': 'video', // mov (Safari)
  'video/x-msvideo': 'video', // avi
  'video/x-matroska': 'video', // mkv (Chrome)
  'video/3gpp': 'video',
  'video/3gpp2': 'video',
  'video/mpeg': 'video',

  // ============================
  // Audio
  // ============================
  'audio/mpeg': 'audio', // mp3
  'audio/wav': 'audio',
  'audio/x-wav': 'audio',
  'audio/webm': 'audio',
  'audio/ogg': 'audio',
  'audio/opus': 'audio',
  'audio/aac': 'audio',
  'audio/mp4': 'audio',
  'audio/flac': 'audio', // Safari only
  'audio/x-flac': 'audio',

  // ============================
  // PDF
  // ============================
  'application/pdf': 'pdf',

  // ============================
  // Text / Document
  // ============================
  'text/plain': 'text',
  'text/markdown': 'document', // éƒ¨åˆ†æµè§ˆå™¨
  'text/x-markdown': 'document',
  'text/richtext': 'document',
  'text/rtf': 'document',
  'application/rtf': 'document',

  // ============================
  // JSON / Data / Config
  // ============================
  'application/json': 'code',
  'application/ld+json': 'code',
  'application/geo+json': 'code',
  'application/x-yaml': 'code',
  'text/yaml': 'code',
  'text/x-yaml': 'code',
  'application/xml': 'code',
  'text/xml': 'code',

  // ============================
  // CSV / Spreadsheet
  // ============================
  'text/csv': 'sheet',
  'application/vnd.ms-excel': 'sheet',
  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'sheet',

  // ============================
  // Word
  // ============================
  'application/msword': 'word',
  'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'word',

  // ============================
  // PowerPoint
  // ============================
  'application/vnd.ms-powerpoint': 'slide',
  'application/vnd.openxmlformats-officedocument.presentationml.presentation': 'slide',

  // ============================
  // HTML / Web
  // ============================
  'text/html': 'code',
  'text/css': 'code',
  'text/javascript': 'code',
  'application/javascript': 'code',
  'application/x-javascript': 'code',

  // ============================
  // Archives
  // ============================
  'application/zip': 'archive',
  'application/x-zip-compressed': 'archive',
  'application/x-7z-compressed': 'archive',
  'application/x-rar-compressed': 'archive',
  'application/gzip': 'archive',
  'application/x-gzip': 'archive',
  'application/x-tar': 'archive',

  // ============================
  // Executables
  // ============================
  'application/x-msdownload': 'settings', // exe
  'application/vnd.apple.installer+xml': 'settings', // pkg
  'application/x-sh': 'settings',
  'application/x-bat': 'settings',

  // ============================
  // Certificates / Security
  // ============================
  'application/x-x509-ca-cert': 'shield',
  'application/pkix-cert': 'shield',

  // ============================
  // Torrent
  // ============================
  'application/x-bittorrent': 'download',

  // ============================
  // Fonts
  // ============================
  'font/ttf': 'document',
  'font/otf': 'document',
  'font/woff': 'document',
  'font/woff2': 'document',

  // ============================
  // Misc text formats
  // ============================
  'application/x-httpd-php': 'code',
  'application/x-python': 'code',
  'application/x-shellscript': 'code',
  'application/x-typescript': 'code',
  'application/x-java-source': 'code',
};

```



# ğŸ§© 3. æ‰©å±•å â†’ åˆ†ç±»ï¼ˆMIME ä¸ºç©ºæ—¶ fallbackï¼‰

è¿™é‡Œè¦†ç›–æ‰€æœ‰æµè§ˆå™¨ä¸è®¤è¯†çš„ç±»å‹ï¼ˆmdã€tsã€pyã€rarã€7zã€isoã€romã€savâ€¦ï¼‰

```
export const EXT_TO_CATEGORY: Record<string, keyof typeof CATEGORY_TO_RI_ICON> = {
  // ============================
  // Images
  // ============================
  jpg: 'image',
  jpeg: 'image',
  jpe: 'image',
  jif: 'image',
  jfif: 'image',
  jfi: 'image',
  png: 'image',
  apng: 'image',
  webp: 'image',
  bmp: 'image',
  dib: 'image',
  rle: 'image',
  gif: 'gif',
  tif: 'image',
  tiff: 'image',
  heic: 'image',
  heif: 'image',
  avif: 'image',
  ico: 'image',
  cur: 'image',
  svg: 'image',
  svgz: 'image',
  psd: 'image',
  ai: 'image',
  eps: 'image',
  raw: 'image',
  cr2: 'image',
  nef: 'image',
  arw: 'image',
  orf: 'image',
  rw2: 'image',
  dng: 'image',
  webp2: 'image',
  xcf: 'image',

  // ============================
  // Video
  // ============================
  mp4: 'video',
  m4v: 'video',
  mp4v: 'video',
  mpg: 'video',
  mpeg: 'video',
  mpe: 'video',
  mp2: 'video',
  mpv: 'video',
  webm: 'video',
  ogv: 'video',
  ogx: 'video',
  mov: 'video',
  qt: 'video',
  avi: 'video',
  wmv: 'video',
  asf: 'video',
  mkv: 'video',
  mka: 'video',
  mks: 'video',
  mk3d: 'video',
  flv: 'video',
  f4v: 'video',
  f4p: 'video',
  f4a: 'video',
  f4b: 'video',
  3gp: 'video',
  3g2: 'video',
  ts: 'video',
  m2ts: 'video',
  mts: 'video',
  vob: 'video',
  mxf: 'video',
  rm: 'video',
  rmvb: 'video',

  // ============================
  // Audio
  // ============================
  mp3: 'audio',
  mp2a: 'audio',
  mp2v: 'audio',
  mpga: 'audio',
  m4a: 'audio',
  m4b: 'audio',
  m4p: 'audio',
  aac: 'audio',
  ac3: 'audio',
  eac3: 'audio',
  wav: 'audio',
  wave: 'audio',
  ogg: 'audio',
  oga: 'audio',
  opus: 'audio',
  flac: 'audio',
  wma: 'audio',
  amr: 'audio',
  aiff: 'audio',
  aif: 'audio',
  aifc: 'audio',
  caf: 'audio',
  mid: 'audio',
  midi: 'audio',
  rmi: 'audio',
  kar: 'audio',
  mkaudio: 'audio',

  // ============================
  // PDF
  // ============================
  pdf: 'pdf',

  // ============================
  // Office / Documents
  // ============================
  doc: 'word',
  docx: 'word',
  dot: 'word',
  dotx: 'word',
  docm: 'word',
  dotm: 'word',
  rtf: 'document',
  wps: 'document',
  wpt: 'document',
  odt: 'document',
  ott: 'document',
  fodt: 'document',
  uot: 'document',
  uof: 'document',
  pages: 'document',

  xls: 'sheet',
  xlsx: 'sheet',
  xlt: 'sheet',
  xltx: 'sheet',
  xlsm: 'sheet',
  xltm: 'sheet',
  xlsb: 'sheet',
  ods: 'sheet',
  ots: 'sheet',
  fods: 'sheet',
  csv: 'sheet',
  tsv: 'sheet',
  sxc: 'sheet',
  numbers: 'sheet',

  ppt: 'slide',
  pptx: 'slide',
  pps: 'slide',
  ppsx: 'slide',
  pot: 'slide',
  potx: 'slide',
  pptm: 'slide',
  potm: 'slide',
  odp: 'slide',
  otp: 'slide',
  fodp: 'slide',
  key: 'slide',

  // ============================
  // Text / Markup / Docs
  // ============================
  txt: 'text',
  text: 'text',
  log: 'time',
  ini: 'text',
  cfg: 'text',
  conf: 'text',
  config: 'text',
  properties: 'text',
  env: 'text',
  md: 'document',
  markdown: 'document',
  mkd: 'document',
  mkdn: 'document',
  rst: 'document',
  adoc: 'document',
  asciidoc: 'document',
  nfo: 'info',
  readme: 'document',
  license: 'document',
  lic: 'document',
  rtx: 'document',
  tex: 'document',
  latex: 'document',
  sty: 'document',
  cls: 'document',
  chm: 'document',
  hlp: 'document',

  // ============================
  // Code / Scripts / Config
  // ============================
  js: 'code',
  mjs: 'code',
  cjs: 'code',
  jsx: 'code',
  ts: 'code',
  tsx: 'code',
  json: 'code',
  jsonc: 'code',
  json5: 'code',
  map: 'code',
  html: 'code',
  htm: 'code',
  xhtml: 'code',
  shtml: 'code',
  xml: 'code',
  xsd: 'code',
  xsl: 'code',
  xslt: 'code',
  rss: 'code',
  atom: 'code',
  yml: 'code',
  yaml: 'code',
  toml: 'code',
  ini_bak: 'time',

  css: 'code',
  scss: 'code',
  sass: 'code',
  less: 'code',
  styl: 'code',

  vue: 'code',
  svelte: 'code',
  astro: 'code',

  php: 'code',
  phtml: 'code',
  php3: 'code',
  php4: 'code',
  php5: 'code',
  php7: 'code',
  phps: 'code',

  py: 'code',
  pyw: 'code',
  pyc: 'code',
  pyo: 'code',
  pyd: 'code',

  rb: 'code',
  erb: 'code',
  rhtml: 'code',

  java: 'code',
  class: 'code',
  jar: 'code',
  war: 'code',
  ear: 'code',

  c: 'code',
  h: 'code',
  cpp: 'code',
  cxx: 'code',
  cc: 'code',
  hh: 'code',
  hpp: 'code',
  hxx: 'code',
  inl: 'code',

  cs: 'code',
  vb: 'code',
  fs: 'code',
  fsx: 'code',

  go: 'code',
  rs: 'code',
  swift: 'code',
  kt: 'code',
  kts: 'code',
  dart: 'code',
  scala: 'code',
  groovy: 'code',
  gradle: 'code',

  sh: 'settings',
  bash: 'settings',
  zsh: 'settings',
  ksh: 'settings',
  fish: 'settings',
  csh: 'settings',
  tcsh: 'settings',

  bat: 'settings',
  cmd: 'settings',
  ps1: 'settings',
  psd1: 'settings',
  psm1: 'settings',

  sql: 'code',
  db: 'chart',
  db3: 'chart',
  sqlite: 'chart',
  sqlite3: 'chart',
  mdb: 'chart',
  accdb: 'chart',

  reg: 'code',
  inf: 'code',
  vbs: 'code',
  wsf: 'code',

  // ============================
  // Archives / Compressed
  // ============================
  zip: 'archive',
  zipx: 'archive',
  rar: 'archive',
  r00: 'archive',
  r01: 'archive',
  r02: 'archive',
  '7z': 'archive',
  '7zip': 'archive',
  tar: 'archive',
  tgz: 'archive',
  tar.gz: 'archive',
  tbz: 'archive',
  tbz2: 'archive',
  tar.bz2: 'archive',
  txz: 'archive',
  tar.xz: 'archive',
  tlz: 'archive',
  tar.lz: 'archive',
  gz: 'archive',
  bz: 'archive',
  bz2: 'archive',
  xz: 'archive',
  lz: 'archive',
  lzma: 'archive',
  z: 'archive',
  cab: 'archive',
  arj: 'archive',
  lzh: 'archive',
  iso: 'game',
  img: 'archive',
  dmg: 'settings',
  bin: 'chart',
  cue: 'chart',
  nrg: 'archive',
  uha: 'archive',
  ace: 'archive',
  zoo: 'archive',
  lha: 'archive',
  sit: 'archive',
  sitx: 'archive',
  pak: 'game',
  pak0: 'game',
  pak1: 'game',
  wad: 'game',
  pk3: 'game',
  pk4: 'game',

  // ============================
  // Game / ROM / Save
  // ============================
  rom: 'game',
  nes: 'game',
  smc: 'game',
  sfc: 'game',
  gba: 'game',
  gb: 'game',
  gbc: 'game',
  nds: 'game',
  n64: 'game',
  z64: 'game',
  v64: 'game',
  gcm: 'game',
  iso_game: 'game',
  cso: 'game',
  xiso: 'game',
  sav: 'game',
  srm: 'game',
  mcr: 'game',
  dsv: 'game',
  dat_game: 'game',
  pak_game: 'game',
  wad_game: 'game',

  // ============================
  // HWP
  // ============================
  hwp: 'hwp',
  hwpx: 'hwp',

  // ============================
  // Data / Chart / Binary
  // ============================
  dat: 'chart',
  binlog: 'chart',
  bak: 'time',
  old: 'time',
  tmp: 'time',
  temp: 'time',
  swp: 'time',
  swx: 'time',
  lockfile: 'lock',
  idx: 'search',
  index: 'search',
  dbf: 'chart',
  mdf: 'chart',
  ndf: 'chart',
  dmp: 'chart',
  dump: 'chart',
  bak1: 'time',
  bak2: 'time',

  // ============================
  // Settings / Executables
  // ============================
  exe: 'settings',
  msi: 'settings',
  msp: 'settings',
  com: 'settings',
  scr: 'settings',
  app: 'settings',
  apk: 'settings',
  aab: 'settings',
  xap: 'settings',
  ipa: 'settings',
  xapk: 'settings',
  elf: 'settings',
  so: 'settings',
  dll: 'settings',
  ocx: 'settings',
  sys: 'settings',
  drv: 'settings',
  service: 'settings',
  run: 'settings',
  command: 'settings',
  gadget: 'settings',
  crx: 'settings',
  xpi: 'settings',
  vsix: 'settings',
  pkg: 'settings',
  deb: 'settings',
  rpm: 'settings',
  flatpak: 'settings',
  snap: 'settings',

  // ============================
  // Lock / Encrypted / Security
  // ============================
  enc: 'lock',
  crypt: 'lock',
  encrypted: 'lock',
  aes: 'lock',
  gpg: 'lock',
  pgp: 'lock',
  kdb: 'lock',
  kdbx: 'lock',
  vault: 'lock',
  keystore: 'lock',
  jks: 'lock',
  p12: 'lock',
  pfx: 'lock',
  pem: 'shield',
  crt: 'shield',
  cer: 'shield',
  der: 'shield',
  key: 'shield',
  pub: 'shield',
  ssh: 'shield',
  known_hosts: 'shield',
  authorized_keys: 'shield',

  // ============================
  // Time / History / Logs
  // ============================
  '.log': 'time',
  '.bak': 'time',
  '.old': 'time',
  '.tmp': 'time',
  '.temp': 'time',
  '.swp': 'time',
  '.swo': 'time',
  '.orig': 'time',
  '.rej': 'time',

  // ============================
  // User / Profile / Config
  // ============================
  profile: 'user',
  'user.conf': 'user',
  'user.ini': 'user',
  'user.json': 'user',
  'settings.json': 'user',
  'config.json': 'user',
  'preferences.json': 'user',

  // ============================
  // Upload / Download / Transfer
  // ============================
  uploading: 'upload',
  upload: 'upload',
  part: 'transfer',
  crdownload: 'download',
  download: 'download',
  torrent: 'download',
  magnet: 'download',

  // ============================
  // Search / Info / Warning / Mark
  // ============================
  idx: 'search',
  index_db: 'search',
  nfo: 'info',
  info: 'info',
  warn: 'warning',
  warning: 'warning',
  alert: 'warning',
  template: 'add',
  tpl: 'add',
  skeleton: 'add',
  trash: 'reduce',
  deleted: 'reduce',
  removed: 'reduce',
  starred: 'marked',
  favorite: 'marked',
  favourite: 'marked',
};

```


# ğŸ§© 4. ä¸»å‡½æ•°ï¼šä» File å¾—åˆ°åˆ†ç±»

è¿™æ˜¯ä½ çœŸæ­£è¦ç”¨çš„ APIã€‚

```ts
export function classifyFile(file: File): keyof typeof CATEGORY_TO_RI_ICON {
  const mime = file.type.trim().toLowerCase();

  // 1. MIME ä¼˜å…ˆ
  if (mime && MIME_TO_CATEGORY[mime]) {
    return MIME_TO_CATEGORY[mime];
  }

  // 2. æ‰©å±•å fallback
  const name = file.name.toLowerCase();
  const ext = name.includes('.') ? name.split('.').pop()! : '';

  if (ext && EXT_TO_CATEGORY[ext]) {
    return EXT_TO_CATEGORY[ext];
  }

  // 3. fallback
  return 'unknow';
}

```

---

# ğŸ§© 5. è·å–å›¾æ ‡ï¼ˆæœ€ç»ˆ APIï¼‰

```ts
export function getFileIcon(file: File): string {
  const category = classifyFile(file);
  return CATEGORY_TO_RI_ICON[category] ?? CATEGORY_TO_RI_ICON.file;
}
```


```
ç»™æˆ‘æ”¹æ”¹ï¼Œå‚æ•°æ˜¯ data: {
fileName: string
fileType: string
}

å…³äºåç¼€åçš„æˆªå–ä¹Ÿè¦ä¼˜åŒ–ï¼Œå› ä¸ºæ–‡ä»¶åå¯èƒ½æœ‰å¤šä¸ªç‚¹ï¼Œåº”å°†æ‰€æœ‰å¯èƒ½æ€§åŒ¹é…
```

ä¸‹é¢ç»™ä½ ä¸€ä»½**å®Œå…¨äº§å“çº§ã€æœºåˆ¶çº§æ­£ç¡®**çš„ç‰ˆæœ¬ï¼Œæ»¡è¶³ä½ çš„ä¸¤ä¸ªè¦æ±‚ï¼š

1. **å‚æ•°æ”¹ä¸º data: { fileName: string; fileType: string }**
2. **åç¼€åæˆªå–ä¼˜åŒ–ï¼šæ–‡ä»¶åå¯èƒ½æœ‰å¤šä¸ªç‚¹ï¼Œéœ€è¦å°è¯•æ‰€æœ‰å¯èƒ½çš„åç¼€ç»„åˆ**

å¹¶ä¸”ä¿æŒä½ åŸæœ¬çš„åˆ†ç±»é€»è¾‘ï¼š

- **ä¼˜å…ˆ MIME**
- **å…¶æ¬¡æ‰©å±•åï¼ˆå¤šæ®µåŒ¹é…ï¼‰**
- **æœ€å fallback åˆ° unknow**

---

# âœ… **æœ€ç»ˆç‰ˆï¼šclassifyFile(data)ï¼ˆæ”¯æŒå¤šæ®µåç¼€åŒ¹é…ï¼‰**

```ts
export function classifyFile(data: {
  fileName: string
  fileType: string
}): keyof typeof CATEGORY_TO_RI_ICON {
  const mime = data.fileType.trim().toLowerCase();

  // 1. MIME ä¼˜å…ˆ
  if (mime && MIME_TO_CATEGORY[mime]) {
    return MIME_TO_CATEGORY[mime];
  }

  // 2. æ‰©å±•å fallbackï¼ˆæ”¯æŒå¤šæ®µåç¼€ï¼‰
  const name = data.fileName.toLowerCase().trim();

  // ä¾‹å¦‚ï¼š "archive.tar.gz" â†’ ["tar.gz", "gz"]
  const parts = name.split('.').filter(Boolean);

  if (parts.length > 1) {
    // ä»æœ€é•¿åç¼€å¼€å§‹åŒ¹é…
    for (let i = 1; i < parts.length; i++) {
      const ext = parts.slice(i).join('.'); // tar.gz / gz
      if (EXT_TO_CATEGORY[ext]) {
        return EXT_TO_CATEGORY[ext];
      }
    }
  }

  // å•æ®µåç¼€ï¼ˆå¦‚ "file.txt"ï¼‰
  const lastExt = parts.length > 0 ? parts[parts.length - 1] : '';
  if (lastExt && EXT_TO_CATEGORY[lastExt]) {
    return EXT_TO_CATEGORY[lastExt];
  }

  // 3. fallback
  return 'unknow';
}
```

---

# âœ… **æœ€ç»ˆç‰ˆï¼šgetFileIcon(data)**

```ts
export function getFileIcon(data: {
  fileName: string
  fileType: string
}): string {
  const category = classifyFile(data);
  return CATEGORY_TO_RI_ICON[category] ?? CATEGORY_TO_RI_ICON.file;
}
```

---

# ğŸ§  **ä¸ºä»€ä¹ˆè¦è¿™æ ·å¤„ç†å¤šæ®µåç¼€ï¼Ÿ**

ä¸¾ä¾‹ï¼š

```
archive.tar.gz
```

ä½ å¸Œæœ›åŒ¹é…é¡ºåºæ˜¯ï¼š

1. `tar.gz`ï¼ˆæ›´å…·ä½“ï¼‰
2. `gz`ï¼ˆæ›´é€šç”¨ï¼‰

å†æ¯”å¦‚ï¼š

```
backup.profile.json
```

ä½ å¸Œæœ›åŒ¹é…ï¼š

1. `profile.json` â†’ user
2. `json` â†’ code

æ‰€ä»¥æˆ‘ä»¬ç”¨ï¼š

```ts
parts.slice(i).join('.')
```

æ¥ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„åç¼€ç»„åˆã€‚

---

# ğŸ¯ **ç¤ºä¾‹ï¼šåˆ†ç±»æ•ˆæœ**

|æ–‡ä»¶å|MIME|åŒ¹é…åˆ°|åˆ†ç±»|
|---|---|---|---|
|`photo.png`|image/png|MIME|image|
|`archive.tar.gz`|""|tar.gz|archive|
|`backup.profile.json`|""|profile.json|user|
|`backup.old.log`|""|old.log â†’ old â†’ time|time|
|`game.rom`|""|rom|game|
|`unknownfile`|""|æ— |unknow|

å®Œå…¨ç¬¦åˆä½  PocketChat çš„éœ€æ±‚ã€‚

---

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘è¿˜èƒ½ç»§ç»­å¸®ä½ ï¼š

- ç”Ÿæˆ **ç±»å‹å®‰å…¨çš„ Category ç±»å‹**
- ç”Ÿæˆ **è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆVitestï¼‰**
- ç”Ÿæˆ **æ›´æ™ºèƒ½çš„ MIME fallbackï¼ˆå¦‚ application/octet-streamï¼‰**
- ç”Ÿæˆ **æ–‡ä»¶å¤§å°ã€å¯é¢„è§ˆæ€§ã€å¯æ’­æ”¾æ€§åˆ¤æ–­**

ä½ æƒ³ç»§ç»­æ‰©å±•å“ªä¸€éƒ¨åˆ†ï¼Ÿ